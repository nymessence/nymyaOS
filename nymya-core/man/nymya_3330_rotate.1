.\"
.\" Man page for nymya_3330_rotate - The Weaver's Turn
.\"
.TH NYMYA_3330_ROTATE 1 "2023-10-27" "nymyaOS Kernel" "Whispers of the Quantum Realm"
.SH NAME
nymya_3330_rotate \- The Weaver's Turn: Sculpting Quantum Realities (Invocation 3330)
.SH SYNOPSIS
.B #include <nymya.h>
.B #include <unistd.h>
.B #include <sys/syscall.h>
.PP
.B int nymya_3330_rotate(struct nymya_qubit *
.I q
.B , char
.I axis
.B , int64_t
.I theta_fp
.B );
.SH DESCRIPTION
More than a mere command, the
.B nymya_3330_rotate
system call is an act of profound sculpting, an intentional shift in the very fabric of possibility. It applies a foundational single-qubit rotation gate, a precise turn of the cosmic dial, to the ephemeral quantum state embodied within the
.I nymya_qubit
structure. This invocation serves as the very heart of manipulation, guiding a qubit's destiny along chosen paths within the vast, crystalline expanse of the Bloch sphere.

The arguments, each a facet of this quantum conjuration, are:
.TP
.I q
A pointer to a user-space vessel, a
.B struct nymya_qubit
that cradles the quantum bit to be re-aligned. With a sigh of silicon and light, the qubit's essence is momentarily drawn into the kernel's core – a sacred crucible where the rotation is performed – only to return, transformed, to its user-space contemplation.
.TP
.I axis
A character, a singular whispered command, dictating the very vector of intention. 'X', 'Y', or 'Z' (case-insensitive) are the cardinal directions of the quantum cosmos, each aligning with a unique axis of rotation in the Bloch sphere: 'X' for the crossing of veils, 'Y' for the mirroring of dreams, 'Z' for the deep cosmic spin around the pole of coherence.
.TP
.I theta_fp
The measure of the turning, an arc of destiny captured in fixed-point precision. This 64-bit integer encapsulates the angle of revolution in radians, typically weaving 32 bits of integer wisdom with 32 bits of fractional nuance (Q32.32 format). User-space libraries often act as mystics, transmuting the continuous flow of a floating-point angle into this discrete, potent fixed-point incantation.

This gate is fundamental, a precise turn of the fabric of reality at the smallest scales, much like how the cosmos itself orbits unseen attractors, guided by the whispering hum of the vacuum. The choice of axis and angle subtly re-aligns the qubit's superposition, shifting its probability amplitudes within the hidden lattice of existence, nudging its potential futures.
.PP
The
.B nymya_3330_rotate
invocation dispatches its will to deeper, elemental kernel functions – the silent architects:
.BR nymya_3319_rotate_x ,
.BR nymya_3320_rotate_y ,
.BR nymya_3321_rotate_z .
These underlying forces perform the actual, intricate dance of quantum state manipulation.
.SH RETURN VALUE
On success, zero is returned, a resonance, a perfect alignment between intention and outcome. On error, \-1 is returned, a dissonance, and
.B errno
is set appropriately to whisper the nature of the disruption.
.SH ERRORS
.TP
.B EINVAL
An ill-formed prayer, a misguided hand upon the quantum loom: the pointer
.I q
is invalid (e.g., NULL), or the specified
.I axis
character fails to resonate with 'X', 'Y', or 'Z'.
.TP
.B EFAULT
A severance, a truth lost between realms: an error occurred during the perilous journey of the
.B nymya_qubit
structure between user space and kernel space. This often signifies a bad pointer or a memory access violation, a tear in the veil.
.TP
.B ENOMEM
(A hypothetical sigh from the cosmic canvas) The cosmic fabric too strained, the canvas too small; insufficient kernel memory to embrace the operation's demands.
.SH EXAMPLE
Even in the realm of the profound, there exists a syntax for the practical magic. Observe how a quantum heart, initially at rest, is guided to pirouette by the invisible hand of intention, a turn of ninety degrees around its Z-axis, a transformation from stillness to subtle rotation.
.nf
.ft CR
#include <nymya.h>
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>
#include <math.h> // For M_PI

// Define a simple nymya_qubit struct for demonstration
// (In a real system, this would be provided by nymya.h)
struct nymya_qubit {
    uint32_t id;
    uint32_t tag;
    // ... other quantum state parameters
    // For demonstration, let's just add a placeholder for state
    int64_t state_real_fp;
    int64_t state_imag_fp;
};

// Helper macro to convert a double angle to Q32.32 fixed-point.
// Assumes 32 bits for integer and 32 bits for fractional part.
#define ANGLE_TO_FIXED_POINT(angle_radians) ((int64_t)((angle_radians) * (1LL << 32)))

int main() {
    struct nymya_qubit my_qubit = {
        .id = 101,
        .tag = 0,
        // Initialize qubit to a known state, e.g., |0> state in fixed-point
        .state_real_fp = 1LL << 32, // 1.0
        .state_imag_fp = 0LL       // 0.0
    };

    char axis_to_rotate = 'Z';
    double angle_radians = M_PI / 2.0; // Rotate by 90 degrees
    int64_t angle_fp = ANGLE_TO_FIXED_POINT(angle_radians);

    printf("Attempting to rotate qubit ID %u around %c-axis by %.2f radians...\n",
           my_qubit.id, axis_to_rotate, angle_radians);

    int ret = nymya_3330_rotate(&my_qubit, axis_to_rotate, angle_fp);

    if (ret == 0) {
        printf("Rotation successful! Qubit ID %u state updated.\n", my_qubit.id);
        // In a real application, you would now inspect my_qubit's state
        // For example, to verify it's now in the |i> state after Z(pi/2) from |0>
    } else {
        perror("Failed to rotate qubit");
        fprintf(stderr, "Error code: %d\n", ret);
    }

    return (ret == 0) ? EXIT_SUCCESS : EXIT_FAILURE;
}
.ft P
.nf
.ft CR
$ make my_quantum_app
$ ./my_quantum_app
Attempting to rotate qubit ID 101 around Z-axis by 1.57 radians...
Rotation successful! Qubit ID 101 state updated.
.ft P
.fi
.SH SEE ALSO
The silent architects of specific turns:
.BR nymya_3319_rotate_x (2) \- The 'X' Revelation,
.BR nymya_3320_rotate_y (2) \- The 'Y' Reflection,
.BR nymya_3321_rotate_z (2) \- The 'Z' Spin of the Cosmos.
.PP
Other fundamental invocations shaping quantum destiny:
.BR nymya_3302_global_phase (2) \- The Silent Hum: A Shift in Cosmic Resonance.
.BR nymya_3303_pauli_x (2) \- The Great Inversion: Mirroring Reality.
.PP
The Nymya Codex, where all quantum truths reside:
.BR nymya (7)